# Webfejlesztés 2. (PTI)

## Általános információk

Óraszám
: 1 előadás + 2 gyakorlat + 1 konzultáció

Előfeltétel
: Webfejlesztés 1. (IP-08tWF1EG)

Célkitűzés
: A dinamikus kliens- és szerveroldali webprogramozás alapjainak a megismertetése. A félév első felében a JavaScript nyelvvel és a hozzá kapcsolódó alapfokú webes technológiákkal ismerkednek meg a hallgatók, a félév második felében a PHP nyelven keresztül ismerkednek meg a szerveroldali webprogramozás alapjaival.

Környezet
: A szerveroldali dinamikus weblapok készítését a webprogramozas.inf.elte.hu szerver segítségével végezzük el. A szerveren Nginx webszerver, 7-es verziójú PHP fut. A szerverre a félév elején, a gyakorlati jelentkezések lejártakor minden hallgató kap hozzáférést. A webprogramozás szerverre kell a beadandó feladatokat feltölteni, ezen folyik a félév második felében a gyakorlati munka, illetve ezen írjuk a félév végi évfolyam ZH-t is.

## Előadások

1. 2019.02.11. [Bevezetés, követelmények, JavaScript nyelvi alapok](http://webprogramozas.inf.elte.hu/webfejl2/ea/01/)
2. 2019.02.18. [A HTML programozás alapjai](http://webprogramozas.inf.elte.hu/webfejl2/ea/02/)
3. 2019.02.25. [Események, nyelvi elemek, beépített objektumok](http://webprogramozas.inf.elte.hu/webfejl2/ea/03/)
4. 2019.03.04. [Űrlapok, képek, táblázatok, böngésző](http://webprogramozas.inf.elte.hu/webfejl2/ea/04/)
5. 2019.03.11. [Stílusok, animáció](http://webprogramozas.inf.elte.hu/webfejl2/ea/05/)
6. 2019.03.18. [HTML5 API-k, rasztergrafika, kódszervezés](http://webprogramozas.inf.elte.hu/webfejl2/ea/06/)
7. 2019.03.25. [PHP nyelvi alapok](http://webprogramozas.inf.elte.hu/webfejl2/ea/07/)
8. 2019.04.01. [Bemenet, űrlapok](http://webprogramozas.inf.elte.hu/webfejl2/ea/08/)
9. 2019.04.08. [Adattárolás](http://webprogramozas.inf.elte.hu/webfejl2/ea/09/)
10. 2019.04.15. [Munkamenet-kezelés, hitelesítés](http://webprogramozas.inf.elte.hu/webfejl2/ea/10/)
11. 2019.04.22. elmarad (tavaszi szünet)
12. 2019.04.29. [AJAX](http://webprogramozas.inf.elte.hu/webfejl2/ea/11/)
13. 2019.05.06. [Kitekintés](http://webprogramozas.inf.elte.hu/webfejl2/ea/12/)
14. 2019.05.13. elmarad

## Gyakorlatok

- [1. gyakorlat](#!/subjects/webfejl2-pti/gyak/01)
- [2. gyakorlat](#!/subjects/webfejl2-pti/gyak/02)
- [3. gyakorlat](#!/subjects/webfejl2-pti/gyak/03)
- [4. gyakorlat](#!/subjects/webfejl2-pti/gyak/04)
- [5. gyakorlat](#!/subjects/webfejl2-pti/gyak/05)
- [6. gyakorlat](#!/subjects/webfejl2-pti/gyak/06)
- [7. gyakorlat](#!/subjects/webfejl2-pti/gyak/07)
- [8. gyakorlat](#!/subjects/webfejl2-pti/gyak/08)
- [9. gyakorlat](#!/subjects/webfejl2-pti/gyak/09)
- [10. gyakorlat](#!/subjects/webfejl2-pti/gyak/10)
- [11. gyakorlat](#!/subjects/webfejl2-pti/gyak/11)
- [12. gyakorlat](#!/subjects/webfejl2-pti/gyak/12)

## Számonkérés

Összevont (folyamatos) értékelésű tárgy.

### Az értékelés összetevői

<!-- * Beadandó feladat: JavaScript   -->
* Beadandó feladat: [JavaScript](#!/subjects/webfejl2-pti#javascript-beadandó---robotkaland)  
    Határidő: 2019. április 14. éjfél  
    [Beadás](http://webprogramozas.inf.elte.hu/ebr)

<!-- * Beadandó feladat: [PHP](#php-beadandó--könyvespolc) -->
* Beadandó feladat: PHP  
    Határidő: 2019. május közepe  
    [Beadás](http://webprogramozas.inf.elte.hu/ebr)

<!-- * [Évfolyam ZH](http://webprogramozas.inf.elte.hu/webfejl2/gyak/zh.html) -->
* Évfolyam ZH  
    2019\. május 29. 9:00-12:00, Lovarda

* PótZH  
    2019\. június 5. 9:00-12:00, Lovarda

### A beadandók értékelése

* A beadandók értékelése háromértékű skálán történik: -0,5; 0; 0,5 jegy kapható rá.
* Az értékelés egy mindenki számára elérhető szempontok alapján történik.
* A beadandókat határidőre kell elkészíteni.
* A határidő leteltével a beadandó jegyéből a késés mértékének megfelelően vonunk le pontokat
* A beadandókat a webprogramozás szerverre kell feltölteni a [feltöltő felületen](http://webprogramozas.inf.elte.hu/ebr) keresztül. Más módon küldött beadandókat nem fogadunk el.
* A beadandók plágiumellenőrzésen mennek keresztül az esetleges másolásokat kiszűrendő.
* A beadandók készítőit szükség esetén megkérhetjük megoldásaik megvédésére.

### Az évfolyam ZH értékelése

* Az évfolyam ZH értékelése jeggyel történik 1-5 skálán.
* A megoldások plágiumellenőrzésen esnek át a ZH után. A gyanúsan hasonló megoldást adó hallgatókat megkérhetjük a ZH-ik megvédésére. A másolt ZH-k automatikusan 1-es osztályzatot kapnak.

### Jegyszerzés feltételei

* Részvétel a gyakorlatok legalább 75%-án (maximum 3 hiányzás)
* Két elfogadott beadandó
* Megírt évfolyam ZH

### Értékelés

* Évfolyam ZH jegye + a két beadandó értékelése
* A kettes érdemjegyhez legalább kettesre megírt évfolyam ZH szükséges



<style>
table.robot {
  border-collapse: collapse;
}
.robot td {
  width: 20px;
  height: 20px;
  border: 1px solid gray
}
.mezo {
  background-color: lightgray;
}
.futoszalag {
  background-color: lightblue;
}
.forgato {
  background-color: orange;
}
.start {
  background-color: lightgreen;
}
.cel {
  background-color: darkgreen;
}
.godor {
  background-color: black;
}
.jobb.fal {
  border-right: 4px solid yellow;
}
.bal.fal {
  border-left: 4px solid yellow;
}
.fent.fal {
  border-top: 4px solid yellow;
}
.lent.fal {
  border-bottom: 4px solid yellow;
}
main img {
  width: 100%;
  max-width: 600px;
}
</style>

## JavaScript beadandó - Robotkaland

:::center aligned
![](/assets/images/webfejl2/walle.jpg)
:::

Wall-E, a kis robot egy hatalmas űrhajó alsó szintjén a gépházban dolgozik. Egy nap az űrhajó meteorzáporba kerül, és az egyik meteor lyukat üt az űrhajó testén. A sérülés olyan veszélyes, hogy az automata védelmi rendszer azonnal lezárja ezt a szintet, így emberek nem tudnak a gépházba bemenni. Egyedül Wall-E tartózkodik a gépházban, akinek utasításokat adhatunk. Wall-E memóriája azonban véges, így egyszerre csak 5 parancsot tud megjegyezni és végrehajtani, majd újra és újra be kell őt programozni a következő lépésekre. Ráadásul a meteor a kommunikációs egységet is megrongálta, így mindig csak 9 véletlenszerű utasítás közül választhatjuk ki az 5 parancsot. A dolgot azonban a terep is nehezíti: ami a mindennapi munkát segítette, az most itt akár hátráltathatja is a haladást. A gépházban ugyanis futószalagok, forgatók és gödrök vannak, amelyek befolyásolják a robot mozgását.
Segíts Wall-E-nak eljutni a gépházban a sérülés helyére és megjavítani azt!

### A főoldal

A nyitóoldalon legyen lehetőség pályát választani. Készítsünk elő két pályát: egy kisebbet és egy nagyobbat. A választás után megjelenik a játék oldala, ahol elkezdődik a játék.

### A játék fázisai

<table border="1">
    <tr><td>
    <table class="robot">
        <tr>
            <td class="mezo"></td>
            <td class="cel">✹</td>
            <td class="mezo"></td>
            <td class="mezo"></td>
            <td class="godor"></td>
            <td class="mezo"></td>
        </tr>
        <tr>
            <td class="mezo"></td>
            <td class="futoszalag">⮦</td>
            <td class="futoszalag">⮢</td>
            <td class="mezo"></td>
            <td class="mezo"></td>
            <td class="mezo"></td>
        </tr>
        <tr>
            <td class="mezo"></td>
            <td class="futoszalag">↓</td>
            <td class="futoszalag">⮤</td>
            <td class="futoszalag">←</td>
            <td class="futoszalag">←</td>
            <td class="futoszalag">←</td>
        </tr>
        <tr>
            <td class="mezo"></td>
            <td class="forgato">↺</td>
            <td class="mezo jobb fal"></td>
            <td class="mezo bal fent fal"></td>
            <td class="mezo"></td>
            <td class="mezo"></td>
        </tr>
        <tr>
            <td class="mezo"></td>
            <td class="mezo"></td>
            <td class="godor"></td>
            <td class="mezo"></td>
            <td class="start">⮘</td>
            <td class="mezo"></td>
        </tr>
    </table>
    </td></tr>
    <tr>
        <td>
            9 véletlenszerűen generált kártya
        </td>
    </tr>
    <tr>
        <td>
            5 kiválasztott kártya
        </td>
    </tr>
</table>

#### 0. Előkészületek

Adott egy NxM-es pálya, minden mezője a következő lehet:

- padló (`▩`)
- futószalag (`←`,`↑`,`→`,`↓`,`⮠`,`⮡`,`⮢`,`⮣`,`⮤`,`⮥`,`⮦`,`⮧`)
- forgató (`↺`,`↻`)
- gödör (`◼`)
- start pont egy alap kiindulási iránnyal
- sérülés (`✹`)

A mezők között fal is lehet, ezen a robot nem tud átmenni. A pályát gödör veszi körbe; a pályáról lelépve ebbe zuhanunk. A robot a start pontról indul, a megadott irányba néz (`⮘`,`⮙`,`⮚`,`⮛`). A játék a következő lépésekből áll.

#### 1. Utasítások generálása

A kiindulási utasításkészlet a következő:

- 1 lépés előre (3db) `⭢`
- 2 lépés előre (3db) `⮆`
- 3 lépés előre (3db) `⇶`
- fordulj balra (3db) `⬏`
- fordulj jobbra (3db) `⬎`
- fordulj meg (3db) `⮌`
- tolass (3db) `⭠`

Ebből kell 9 utasítást véletlenszerűen kiválasztania a gépnek, és a képernyőn megjeleníteni.

#### 2. Utasítások kiválasztása

A feltüntetett 9 utasítás közül kell 5 kártyát kiválasztanunk adott idő alatt, és ezeket az utasításregiszterekbe rakni. Az utasításregiszterek minden kör kezdetén üresek. A választás kattintással történik, és az utasításregisztereket balról jobbra folyamatosan töltjük föl. Visszalépési lehetőség nincs az adott körben. A rendelkezésre álló idő a pályához tartozik, értékét fel kell tüntetni másodpercenként. Ha az idő letelik, akkor az utasításregisztereket a lehetőségek közül véletlenszerűen feltölti a gép. Ha az idő letelte előtt beteltek a regiszterek, akkor a következő fázis jön (utasítások végrehajtása).

#### 3. Utasítások végrehajtása

Ekkor egyesével végrehajtjuk a kiválasztott 5 utasítást. Minden utasításnál először a robot mozog, majd a pálya a következő sorrendben:

1. A robot mozog a megadott irányban (ha tud, pl. falon nem tud átmenni).
2. Futószalag tol rajta egyet a megadott irányban. Ha ekkor olyan futószalag elemre érkezik, amelyik kanyarodik, akkor a robot is elfordul. (Ha csak ráléptünk egy ilyen kanyarodó futószalagra, akkor nem fordulunk, hanem az a kimeneti irányában tol minket.)
3. A forgatók az adott irányban 90 fokkal elforgatnak.

Ha gödörbe esünk közben (vagy lelépünk a pályáról), akkor veszítettünk. Ha elérjük a sérülés helyét, akkor nyertünk. Ha mind az 5 utasítás végrehajtódott, akkor az 1. ponttól (utasítások generálása) folytatjuk.

A mozgatások fél másodpercenként kövessék egymást, a felületen jelezni kell, melyik kártya végrehajtása aktuális.

#### 4. Nyer/veszít

A nyerés vagy veszítés tényét kiírjuk a képernyőre.


### Működés és segítség

Nincs elvárás arra vonatkozóan, hogy milyen technológiával (táblázat vagy canvas) oldod meg a feladatot, továbbá a megjelenést és működést illetően sincsenek kőbe vésett elvárások.

Érdemes a pályaleírást valamilyen adatszerkezetben megadni. Ez nemcsak a két előre megadott pálya megjelenítését segíti, de a PHP-s beadandónál az adatbázisban való tárolást is megkönnyíti. A leírás pl. történhet így:

```js
{
    tabla: [
        "▩▩▩◼↑▩▩▩✹▩▩▩",
        "▩▩▩▩↑▩▩▩▩▩▩▩",
        "▩▩▩▩⮤←←←←←←↺▩▩",
        "▩▩▩▩▩▩▩▩▩▩▩▩",
        "▩◼◼▩▩▩▩▩⮘▩▩▩",
    ],
    falak: [
        {sor: 5, oszlop: 6, oldal: "lent"}, // az 5. sor 6. cellájának alsó részén van a fal
        {sor: 5, oszlop: 6, oldal: "balra"},
    ],
    ido: 5000       // 5s van a kártyák kiválasztására
}
```


### Pontozás

Ha szükséges, akkor a pályák átalakíthatók a lenti feltételek kielégítése végett.

#### Kötelező (enélkül nincs jegy):

- Legalább 1 pálya megjelenik.
- Robot, sérülés, gödör van.
- Az utasításkészlet elemei megjelennek és rájuk kattintva a robot mozgatható.
- Végállapot kezelése: nyerés (sérülés helyére eljut) vagy vesztés (gödörbe esik) eldöntése és megjelenítése.

#### Nem kötelező

- A pályák választhatóak, a kiválasztott pálya megjelenik. (1 pont)
- Működik az utasítások generálása (1 pont)
- Működik az utasítások kiválasztása (1 pont)
- Van időlimit az utasítások kiválasztására, és ha letelik, akkor automatikusan feltöltődnek az utasításregiszterek (1 pont)
- Az utasítások végrehajtása megtörténik (1 pont)
- Az utasítások végrehajtása léptetve fél másodpercenként történik (2 pont)
- Van forgató és helyesen működik (1 pont)
- Van egyenes futószalag és helyesen működik (1 pont)
- Van kanyarodó futószalag és helyesen működik (futószalagról vagy pályaelemről odalépve) (1 pont)
- Nincs nagyobb programhiba, nem csalhatók elő furcsa jelenségek (1 pont)
- 1 hét késés (-2 pont)
- 2 hét késés (-4 pont)
- 2 hétnél több késés (nincs elfogadva a beadandó, nincs jegy)

### Értékelés:

- 0-4 pont: -0,5
- 5-8 pont: 0
- 9-11 pont: +0,5

### Beadás

A megoldásokat a webprogramozas.inf.elte.hu szerver [beadási felületén](http://webprogramozas.inf.elte.hu/ebr) kell megtenni.

Határidő: 2019. április 14. éjfél

<!-- 
## PHP beadandó

### Feladatleírás

Készíts egy alkalmazást, amelyben nyilván tarthatod az elolvasott és elolvasandó könyveidet! Az adatok tárolása tetszőleges formában (adatbázis, fájl) történhet.

Az alkalmazásnak a következő funkciókat kell tudnia:

1. **Főoldal** A főoldal megjelenít egy üdvözlő szöveget, és kiírja, hogy jelenleg hány felhasználónak összesen hány könyve van az alkalmazásban.

2. **Hitelesítés** Minden további funkció csak hitelesítés után érhető el. A főoldalon legyen lehetőség bejelentkezni: ehhez email címet és jelszót kérjünk be. Ugyancsak a főoldalon legyen egy link, amin keresztül a regisztrációs oldalra mehetünk. Itt meg kell adni a teljes nevet (kötelező), az email címet (kötelező, email formátum) és a jelszót (kötelező, legalább 6 karakter hosszú). Sikeres regisztráció után újra a főoldalra kerülünk, ahol bejelentkezhetünk. Bejelentkezés után legyen lehetőség kijelentkezni!

3. **Listázó oldal** Sikeres bejelentkezés után a listázó oldalra kerülünk, ahol táblázatos formában megjelennek a bejelentkezett felhasználóhoz tartozó könyvek: szerző, cím, kategória, elolvasva-e.

4. **Új könyv** A listázó oldalról egy link vigyen át egy olyan oldalra, ahol új könyv adatait lehet felvenni. Egy könyvről a következőket kell megadni:

    - szerző (kötelező)
    - cím (kötelező)
    - oldalszám (csak egész szám)
    - kategória (legördülő, szabadon megadható, ld. [datalist](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/datalist))
    - ISBN szám (10 vagy 13 hosszú számsor)
    - elolvasva-e (jelölőmező).

    Hibás kitöltés esetén a hibákat jelezni kell! Siker esetén irányítsuk át az oldalt a listázó oldalra!

5. **Könyv módosítása** A listázó oldalon minden könyv mellett jelenjen meg egy "Módosít" feliratú link. Erre kattintva egy külön oldalon jelenjen meg az új könyv felviteléhez hasonló űrlap, amelyen keresztül módosítani lehet a kívánt könyvet. Első megjelenéskor az űrlapmezők legyenek kitöltve az adott könyv adataival. Módosítás után ellenőrizzük a bevitt adatokat! Ha hibás, jelezzük az oldalon, ekkor már a felküldött adatokat jelenítve meg az űrlapmezőkben. Sikeres módosítás esetén irányítsuk az oldalt a listázó oldalra!

6. **Könyv törlése** A listázó oldalon minden könyv mellett jelenjen meg egy "Törlés" link is. Erre kattintva az adott könyvet töröljük az adatbázisból, és újra jelenjen meg a listázó oldal.

7. **AJAX lapozás** A táblázatban mindig csak 5 elem jelenjen meg. Ha ennél több van, akkor legyen lapozás funkció, azaz a táblázat alatt legyen egy "Előző"-"Következő" link, amire kattintva az előző 5 vagy következő 5 elem jelenik meg a táblázatban. Ha tovább nem lehet menni, akkor az a link ne jelenjen meg. A megoldást AJAX segítségével készítsd el, azaz a teljes oldal újratöltése nélkül.

    A listázó oldal kaphassa meg paraméterként, hogy hányadik oldal töltődik be (pl. `list.php?page=2` -- ez a 6-10. sort fogja mutatni)

    Technikai segítség:

    - A tábla sorainak megszámolása: `SELECT count(1) FROM table`.
    - A tábla rendezése: `SELECT * FROM table ORDER BY id`.
    - A tábla sorai közül valahonnan csak bizonyos mennyiséget lekérdezni: `SELECT * FROM table LIMIT 5 OFFSET 10`.
    - A megjelenő URL átírása: `history.replaceState(null, null, '?page=10')`

    Könyv törlése után a `page` paraméter őrizze meg az értékét!

#### Pontozás

- Főoldal: megjelenik (kötelező)
- Főoldal: számláló (1 pont)
- Hitelesítés: Regisztráció (1 pont)
- Hitelesítés: Bejelentkezés (kötelező)
- Hitelesítés: Kijelentkezés (kötelező)
- Listázó oldal: könyvlista (kötelező)
- Új könyv oldal: hibaellenőrzés (1 pont)
- Új könyv oldal: sikeres mentés (kötelező)
- Könyv módosítása: űrlap kitöltve (1 pont)
- Könyv módosítása: hibaellenőrzés, űrlap állapotmegőrzése további küldéseknél (1 pont)
- Könyv módosítása: sikeres mentés (1 pont)
- Könyv törlése: sikeres törlés (1 pont)
- Könyv törlése: megőrzi a `page` paraméter értékét (1 pont)
- AJAX lapozás (3 pont)
- 1 hét késés (-2 pont)
- 2 hét késés (-4 pont)
- 2 hétnél több késés (nincs elfogadva a beadandó, nincs jegy)

#### Értékelés

- 0-4: -0,5
- 5-8: 0
- 9-11: 0,5

#### Beadás

Tömörített ZIP állományként kell beadni a [feltöltő felületen](http://webprogramozas.inf.elte.hu/ebr).

Határidő: 2019. május 27. éjfél
-->

## Segédanyagok

### Elektronikus tananyag

* [A böngésző mint alkalmazásfejlesztési platform (elektronikus tananyag)](http://webprogramozas.inf.elte.hu/tananyag/kliens/)
* [Dinamikus weboldalak előállítása szerveroldali technológiákkal (elektronikus tananyag)](http://webprogramozas.inf.elte.hu/tananyag/szerver/)
* [Bevezetés a kliens- és szerveroldali webalkalmazások készítésébe (elektronikus tananyag)](http://webprogramozas.inf.elte.hu/tananyag/wf2/index.html)

### Példa beadandók és ZH-k

* [Példa JavaScript beadandó feladat](webfejl2/gyak/js_grafilogika.html)
* [Példa PHP beadandó feladat](webfejl2/gyak/php_grafilogika.html)
* [Példa évfolyam ZH (névjegy)](webfejl2/gyak/pelda_zh.html)
* [Példa évfolyam ZH (csillag)](webfejl2/gyak/pelda_zh2.html)

## Oktatók

### Előadó

Horváth Győző

### Gyakorlatvezetők

* Bende Imre
* Horváth Győző
* Kereszti Krisztián
* Kereszti Zalán
* Rakonczai Sándor
